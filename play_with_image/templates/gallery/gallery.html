{% extends 'base.html' %}

{% block title %}{{ title }}{% endblock title %}{{ title }}

{% block content %}
  <div class="container-fluid tm-container-content tm-mt-60">
    <div class="row mb-4">
      <h2 class="col-6 tm-text-primary">
        {{ title }}
      </h2>
      <div class="col-6 d-flex justify-content-end align-items-center">
        <form action="" class="tm-text-primary" method="POST" id="tag_selector">
          {% csrf_token %}
           Тег: <input name="tag" type="input" placeholder="Введите тег" size="10" class="tm-text-primary">&nbsp;
        </form>
        <form action="" class="tm-text-primary" method="GET">
          Page <input name="page" type="text" value="{{ page }}" size="1" class="tm-input-paging tm-text-primary"> of {{ max_page }}.&nbsp;
        </form>
        <form action="" class="tm-text-primary" method="POST">
          {% csrf_token %}
           Image per page <input name="per_page" type="input" value="{{ per_page }}" size="1" class="tm-input-paging tm-text-primary">&nbsp;
        </form>
      </div>
    </div>
    <div class="row tm-mb-90 tm-gallery">
      {% for image in images %}
        {% include 'gallery/includes/thumb.html' with image=image %}
      {% endfor %}    
    </div> <!-- row -->
    <div class="row tm-mb-90">
      <div class="col-12 d-flex justify-content-between align-items-center tm-paging-col">
        <a 
          href="{% if page > 1 %}?page={{ page|add:-1 }}{% else %}javascript:void(0);{% endif %}" 
          class="btn btn-primary tm-btn-prev mb-2 {% if page == 1 %}disabled{% endif %}"
        >Previous</a>
        <div class="tm-paging d-flex">
          {% for p in pagination %}
            {% if p >= page|add:-2 and p <= page|add:2 %}
              <a href="{% if p == page %}javascript:void(0);{% else %}?page={{ p }}{% endif %}" 
                class="{% if p == page %}active{% endif %} tm-paging-link">{{ p }}</a>
            {% endif %}
          {% endfor %}
        </div>
        <a 
        href="{% if page < max_page %}?page={{ page|add:1 }}{% else %}javascript:void(0);{% endif %}" 
        class="btn btn-primary tm-btn-prev mb-2 {% if page == max_page %}disabled{% endif %}"
      >Next Page</a>
      </div>      
    </div>
  </div> <!-- container-fluid, tm-container-content -->
{% endblock content %}